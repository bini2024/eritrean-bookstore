<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eritrean Bookstore</title>
  <meta name="description" content="Discover and purchase the best Eritrean literature online.">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    :root {
      --primary: #0044cc;
      --secondary: #0066ff;
      --accent: #ffdd00;
      --bg: #f9f9f9;
      --text: #333;
      --card-bg: #fff;
      --panel-width: 320px;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Roboto', sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; }
    header {
      background: var(--primary);
      color: #fff;
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header h1 { font-size: 1.5rem; }
    header nav ul { list-style: none; display: flex; gap: 1rem; align-items: center; }
    header nav ul li a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    .cart-button {
      position: relative;
      display: inline-block;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      right: -10px;
      background: var(--accent);
      color: var(--primary);
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.75rem;
      font-weight: bold;
    }
    .hero {
      background: url('/images/hero.jpg') no-repeat center/cover;
      height: 60vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      position: relative;
    }
    .hero::after { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.4); }
    .hero h2 { font-size: 2.5rem; z-index: 1; margin-bottom: 1rem; }
    .hero .cta .btn { background: var(--accent); color: var(--primary); border: none; padding: 0.75rem 1.5rem; border-radius: 5px; cursor: pointer; transition: background 0.3s; z-index:1; }
    .hero .cta .btn:hover { background: #ffe066; }
    .books-section { padding: 2rem 1rem; max-width: 1200px; margin: auto; }
    .books-header { display: flex; flex-direction: column; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
    .books-header h2 { font-size: 2rem; color: var(--primary); }
    .books-header input { width: 100%; max-width: 400px; padding: 0.5rem; border: 1px solid #ccc; border-radius: 5px; }
    .books-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px,1fr)); gap: 1.5rem; }
    .book-card {
      background: var(--card-bg);
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      transition: transform 0.3s;
    }
    .book-card:hover { transform: translateY(-5px); }
    .book-card img { width: 100%; height: 250px; object-fit: cover; }
    .book-info { padding: 1rem; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
    .book-info h3 { font-size: 1.1rem; color: var(--primary); margin-bottom: 0.5rem; }
    .book-info p { margin-bottom: 0.5rem; }
    .book-info .controls { display: flex; align-items: center; gap: 0.5rem; }
    .book-info .qty { width: 60px; padding: 0.25rem; text-align: center; border: 1px solid #ccc; border-radius: 5px; }
    .book-info .add-btn { background: var(--primary); color: white; border: none; padding: 0.5rem; border-radius: 5px; cursor: pointer; flex-shrink: 0; transition: background 0.3s; }
    .book-info .add-btn:disabled { background: #ccc; cursor: not-allowed; }
    /* Cart panel */
    .cart-panel {
      position: fixed;
      top: 0;
      right: calc(-1 * var(--panel-width));
      width: var(--panel-width);
      height: 100%;
      background: var(--card-bg);
      box-shadow: -4px 0 8px rgba(0,0,0,0.2);
      transition: right 0.3s;
      z-index: 2000;
      display: flex;
      flex-direction: column;
    }
    .cart-panel.open { right: 0; }
    .cart-header { padding: 1rem; background: var(--primary); color: white; display: flex; justify-content: space-between; align-items: center; }
    .cart-header h2 { margin: 0; font-size: 1.25rem; }
    .cart-close { background: transparent; border: none; color: white; font-size: 1.5rem; cursor: pointer; }
    .cart-content { flex-grow: 1; overflow-y: auto; padding: 1rem; }
    .cart-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
    .cart-item .item-info { flex-grow: 1; }
    .cart-item .item-controls { display: flex; align-items: center; gap: 0.5rem; }
    .cart-item .item-controls button { background: transparent; border: 1px solid #ccc; padding: 0.25rem 0.5rem; border-radius: 5px; cursor: pointer; }
    .cart-footer { padding: 1rem; border-top: 1px solid #ddd; }
    .cart-footer p { margin-bottom: 1rem; }
    .cart-footer .checkout-btn { width: 100%; padding: 0.75rem; font-size: 1rem; }
    /* Overlay */
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.4);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s;
      z-index: 1500;
    }
    .overlay.show { opacity: 1; visibility: visible; }
    @media (max-width: 600px) {
      .hero h2 { font-size: 2rem; }
      .books-grid { grid-template-columns: repeat(auto-fill, minmax(150px,1fr)); }
    }

   .footer {
  background: var(--primary);
  color: white;
  padding: 1rem 0.5rem;          /* cut vertical padding in half */
  font-size: 0.8rem;             /* slightly smaller text */
}
.footer-container {
  gap: 1rem;                     /* tighter column spacing */
}
.footer-col {
  min-width: 150px;              /* allow columns to shrink */
}
.footer-col h4 {
  margin-bottom: 0.5rem;
  font-size: 1rem;               /* align heading size */
}
.footer-col ul li {
  margin-bottom: 0.25rem;        /* reduce list item spacing */
}
.footer-bottom {
  margin-top: 1rem;              /* bring copyright up */
  padding-top: 0.5rem;           /* smaller top padding */
}

/* Mobile tweak stays the same */
@media (max-width: 600px) {
  .footer-container {
    flex-direction: column;
    align-items: center;
  }
}

 
  </style>
</head>
<body>
  <header>
    <h1>Eritrean Bookstore</h1>
    <nav>
      <ul>
        <li><a onclick="scrollTo('books')">Books</a></li>
        <li class="cart-button">
          <a onclick="toggleCart()">Cart</a>
          <span class="cart-count" id="cart-count">0</span>
        </li>
      </ul>
    </nav>
  </header>

  <div class="hero">
    <h2>Discover the Best Eritrean Books</h2>
    <div class="cta"><button class="btn" onclick="scrollTo('books')">Shop Now</button></div>
  </div>

  <section id="books" class="books-section">
    <div class="books-header">
      <h2>Our Collection</h2>
      <input type="search" id="searchInput" placeholder="Search books by title...">
    </div>
    <div class="books-grid" id="booksGrid"></div>
  </section>

  <!-- Cart Panel -->
  <div class="overlay" id="cartOverlay" onclick="toggleCart()"></div>
  <aside class="cart-panel" id="cartPanel">
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="cart-close" onclick="toggleCart()">&times;</button>
    </div>
    <div class="cart-content" id="cartItems"></div>
    <div class="cart-footer">
      <p>Total: $<span id="cartTotal">0.00</span></p>
      <button class="checkout-btn" id="checkoutBtn">Checkout</button>
      <p id="orderStatus"></p>
    </div>
  </aside>

  <footer class="footer">
  <div class="footer-container">
    <div class="footer-col">
      <h4>About Us</h4>
      <p>At Eritrean Bookstore, we curate the finest literature celebrating Eritrean culture and history.</p>
    </div>
    <div class="footer-col">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="#books">Browse Books</a></li>
        <li><a href="#contact">Contact Us</a></li>
        <li><a href="admin.html">Admin Panel</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Connect</h4>
      <p>Email: <a href="mailto:contact@eritreanbookstore.com">contact@eritreanbookstore.com</a></p>
      <p>Follow us:</p>
      <div class="social-icons">
        <a href="#" aria-label="Facebook">üìò</a>
        <a href="#" aria-label="Twitter">üê¶</a>
        <a href="#" aria-label="Instagram">üì∏</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 Eritrean Bookstore. All rights reserved.</p>
  </div>
</footer>


  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBE3_ivAE2WFXQ3H8m1OWqM9APvRrI-Ac0",
      authDomain: "eritrean-bookstore.firebaseapp.com",
      projectId: "eritrean-bookstore",
      storageBucket: "eritrean-bookstore.firebasestorage.app",
      messagingSenderId: "645911365846",
      appId: "1:645911365846:web:5cd71799c6969bcaa1a177"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let allBooks = [];
    let cart = JSON.parse(localStorage.getItem('cart')||'[]');

    // Utility
    function scrollTo(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }
    function toggleCart() {
      document.getElementById('cartPanel').classList.toggle('open');
      document.getElementById('cartOverlay').classList.toggle('show');
      renderCart();
    }
    function saveCart() { localStorage.setItem('cart', JSON.stringify(cart)); updateCartCount(); }
    function updateCartCount() { document.getElementById('cart-count').textContent = cart.reduce((sum,i)=>sum+i.quantity,0); }

    // Fetch & render books
    async function fetchBooks() {
      const snap = await db.collection('books').get();
      allBooks = snap.docs.map(d=>({ id: d.id, ...d.data() }));
      renderBooks(allBooks);
    }
    function renderBooks(list) {
      const grid = document.getElementById('booksGrid'); grid.innerHTML='';
      list.forEach(book=>{
        const card = document.createElement('div'); card.className='book-card';
        card.innerHTML = `
          <img src="${book.imgURL}" alt="${book.title}" loading="lazy">
          <div class="book-info">
            <h3>${book.title}</h3>
            <p>$${book.price.toFixed(2)}</p>
            <div class="controls">
              <input type="number" min="1" max="${book.stock}" value="1" class="qty" id="qty-${book.id}" />
              <button class="add-btn" id="btn-${book.id}" ${book.stock===0?'disabled':''}>${book.stock>0?'Add to Cart':'Out of Stock'}</button>
            </div>
          </div>`;
        grid.appendChild(card);
        // Attach add handler
        document.getElementById(`btn-${book.id}`).onclick = () => {
          const qty = parseInt(document.getElementById(`qty-${book.id}`).value);
          addToCart(book.id, qty);
          toggleCart();
        };
      });
      document.getElementById('searchInput').oninput = e => {
        const q = e.target.value.toLowerCase();
        renderBooks(list.filter(b=>b.title.toLowerCase().includes(q)));
      };
    }

    // Cart functions
    function addToCart(id, qty) {
      const book = allBooks.find(b=>b.id===id);
      if (!book || book.stock < qty) return;
      // Remove existing entry
      cart = cart.filter(i=>i.id!==id);
      cart.push({ id, title: book.title, price: book.price, quantity: qty });
      saveCart();
    }
    function renderCart() {
      const container = document.getElementById('cartItems'); container.innerHTML='';
      const totalEl = document.getElementById('cartTotal'); let total=0;
      if(cart.length===0) { container.innerHTML='<p>Your cart is empty.</p>'; totalEl.textContent='0.00'; return; }
      cart.forEach(item=>{
        total += item.price*item.quantity;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <div class="item-info">
            <strong>${item.title}</strong><br>$${item.price.toFixed(2)} x
            <span class="item-qty">${item.quantity}</span>
          </div>
          <div class="item-controls">
            <button onclick="updateQty('${item.id}', ${item.quantity}-1)">-</button>
            <button onclick="updateQty('${item.id}', ${item.quantity}+1)">+</button>
            <button onclick="removeItem('${item.id}')">&times;</button>
          </div>`;
        container.appendChild(div);
      });
      totalEl.textContent = total.toFixed(2);
    }
    function updateQty(id, newQty) {
      if(newQty<1) return removeItem(id);
      const book = allBooks.find(b=>b.id===id);
      if(!book || newQty>book.stock) return;
      cart = cart.map(i=> i.id===id ? {...i,quantity:newQty} : i);
      saveCart(); renderCart();
    }
    function removeItem(id) {
      cart = cart.filter(i=>i.id!==id);
      saveCart(); renderCart();
    }

    // Checkout
    document.getElementById('checkoutBtn').onclick = async () => {
      if(cart.length===0) return;
      const statusEl = document.getElementById('orderStatus'); statusEl.textContent='';
      const items = cart.map(i=>({ title:i.title, quantity:i.quantity, price:i.price }));
      const total = cart.reduce((s,i)=> s+i.price*i.quantity,0);
      try {
        await db.collection('orders').add({ items, total, timestamp: firebase.firestore.FieldValue.serverTimestamp(), status:'pending' });
        for(const i of cart) {
          await db.collection('books').doc(i.id).update({ stock: firebase.firestore.FieldValue.increment(-i.quantity) });
        }
        cart=[]; saveCart(); renderCart(); fetchBooks(); statusEl.textContent='Thank you for your order!';
      } catch(err) { statusEl.textContent='Order failed.'; console.error(err); }
    };

    // Init
    updateCartCount(); fetchBooks();
  </script>
</body>
</html>
